<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>faithreflects ¬∑ Evening Devotional</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Cinzel:wght@400;500&family=Lato:wght@300;400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #080710;
    --bg2: #0f0d1a;
    --panel: #12101c;
    --panel2: #1a1629;
    --border: rgba(180,140,80,0.18);
    --gold: #c9a84c;
    --gold2: #e8c97a;
    --cream: #f0e8d5;
    --muted: #8a7e6a;
    --wine: #5c1a2e;
    --rose: #9b3a5a;
    --indigo: #2a2460;
    --glow: rgba(201,168,76,0.12);
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--cream);
    font-family: 'Lato', sans-serif;
    font-weight: 300;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ FIXED BG LAYERS ‚îÄ‚îÄ */
  #stars-canvas {
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
  }
  #moon-canvas {
    position: fixed; top: 40px; right: 60px; z-index: 0; pointer-events: none;
    opacity: 0.55;
  }
  .shooting-star {
    position: fixed;
    width: 2px; height: 2px;
    background: #fff;
    border-radius: 50%;
    z-index: 0;
    pointer-events: none;
    opacity: 0;
  }

  /* ‚îÄ‚îÄ GRAIN OVERLAY ‚îÄ‚îÄ */
  body::before {
    content: '';
    position: fixed; inset: 0; z-index: 1;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none; opacity: 0.4;
  }

  /* ‚îÄ‚îÄ AURORA ‚îÄ‚îÄ */
  .aurora { position: fixed; inset: 0; z-index: 0; overflow: hidden; pointer-events: none; }
  .aurora-blob {
    position: absolute; border-radius: 50%;
    filter: blur(100px); opacity: 0.065;
    animation: drift 20s ease-in-out infinite alternate;
  }
  .aurora-blob:nth-child(1) { width:700px; height:700px; background:radial-gradient(circle,#c9a84c,transparent 70%); top:-15%; left:-15%; animation-duration:22s; }
  .aurora-blob:nth-child(2) { width:550px; height:550px; background:radial-gradient(circle,#5c1a2e,transparent 70%); bottom:-15%; right:-15%; animation-duration:26s; animation-delay:-9s; }
  .aurora-blob:nth-child(3) { width:450px; height:450px; background:radial-gradient(circle,#2a2460,transparent 70%); top:35%; left:35%; animation-duration:18s; animation-delay:-5s; }
  .aurora-blob:nth-child(4) { width:300px; height:300px; background:radial-gradient(circle,#1a3a2a,transparent 70%); top:60%; right:10%; animation-duration:30s; animation-delay:-12s; }

  @keyframes drift {
    from { transform: translate(0,0) scale(1); }
    to   { transform: translate(50px,35px) scale(1.12); }
  }

  /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
  .container {
    position: relative; z-index: 2;
    max-width: 920px; margin: 0 auto; padding: 0 24px 100px;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    text-align: center; padding: 70px 0 40px; position: relative;
  }
  .header-ornament {
    display: flex; align-items: center; justify-content: center;
    gap: 16px; margin-bottom: 20px;
  }
  .ornament-line {
    width: 60px; height: 1px;
    background: linear-gradient(90deg,transparent,rgba(201,168,76,0.5));
  }
  .ornament-line.r { background: linear-gradient(90deg,rgba(201,168,76,0.5),transparent); }
  .brand {
    font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 6px;
    color: var(--gold); text-transform: uppercase; opacity: 0.9;
  }
  .main-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(44px, 7.5vw, 78px);
    font-weight: 300; font-style: italic; color: var(--cream);
    line-height: 1.05;
    text-shadow: 0 0 80px rgba(201,168,76,0.35), 0 2px 40px rgba(0,0,0,0.8);
    margin-bottom: 10px; letter-spacing: -1px;
  }
  .sub-title {
    font-family: 'Cinzel', serif; font-size: 9px;
    letter-spacing: 7px; color: var(--muted); text-transform: uppercase;
  }
  .gold-line {
    width: 100px; height: 1px;
    background: linear-gradient(90deg,transparent,var(--gold),transparent);
    margin: 28px auto;
  }
  .header-verse {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 14px; color: var(--muted); letter-spacing: 1px;
    max-width: 380px; margin: 0 auto 20px; line-height: 1.7;
  }

  /* ‚îÄ‚îÄ MULTI CANDLE SCENE ‚îÄ‚îÄ */
  .candle-scene {
    display: flex; justify-content: center; align-items: flex-end;
    gap: 28px; margin: 10px 0 40px; position: relative;
  }
  .candle { position: relative; display: flex; flex-direction: column; align-items: center; }
  .candle-body {
    background: linear-gradient(180deg,#e8c97a 0%,#c9a84c 60%,#9a7c30 100%);
    border-radius: 3px 3px 0 0; margin: 0 auto;
  }
  .candle-sm .candle-body { width: 9px; height: 32px; }
  .candle-md .candle-body { width: 12px; height: 50px; }
  .candle-lg .candle-body { width: 16px; height: 68px; }
  .candle-wick { width: 2px; background: #2a1a0a; margin: 0 auto; border-radius: 2px; }
  .candle-sm .candle-wick { height: 7px; }
  .candle-md .candle-wick { height: 9px; }
  .candle-lg .candle-wick { height: 12px; }
  .flame {
    border-radius: 50% 50% 30% 30%; margin: 0 auto -2px;
    filter: blur(1px); transform-origin: bottom center;
    background: radial-gradient(ellipse at 50% 90%,#fff 0%,#ffe066 30%,#ffaa00 60%,transparent 100%);
  }
  .candle-sm .flame { width: 10px; height: 15px; animation: flicker 2.1s ease-in-out infinite; }
  .candle-md .flame { width: 14px; height: 22px; animation: flicker 1.8s ease-in-out infinite 0.3s; }
  .candle-lg .flame { width: 18px; height: 28px; animation: flicker 2.4s ease-in-out infinite 0.7s; }
  .flame-glow {
    position: absolute; top: -10px; left: 50%;
    transform: translateX(-50%); border-radius: 50%; pointer-events: none;
    background: radial-gradient(circle,rgba(255,180,0,0.35) 0%,transparent 70%);
  }
  .candle-sm .flame-glow { width: 50px; height: 50px; animation: flicker 2.1s ease-in-out infinite; }
  .candle-md .flame-glow { width: 70px; height: 70px; animation: flicker 1.8s ease-in-out infinite 0.3s; }
  .candle-lg .flame-glow { width: 90px; height: 90px; animation: flicker 2.4s ease-in-out infinite 0.7s; }
  .candle-table {
    position: absolute; bottom: -8px;
    width: 220px; height: 3px;
    background: linear-gradient(90deg,transparent,rgba(201,168,76,0.2),rgba(201,168,76,0.3),rgba(201,168,76,0.2),transparent);
    border-radius: 50%;
    box-shadow: 0 0 30px rgba(201,168,76,0.15);
  }

  @keyframes flicker {
    0%,100% { transform:scaleX(1) scaleY(1) rotate(-1deg); opacity:1; }
    25%      { transform:scaleX(0.88) scaleY(1.06) rotate(1.2deg); opacity:0.93; }
    50%      { transform:scaleX(1.06) scaleY(0.96) rotate(-0.5deg); opacity:1; }
    75%      { transform:scaleX(0.94) scaleY(1.03) rotate(1.5deg); opacity:0.88; }
  }

  /* ‚îÄ‚îÄ FIREFLIES ‚îÄ‚îÄ */
  .firefly {
    position: fixed; width: 3px; height: 3px;
    background: #ffe066; border-radius: 50%;
    filter: blur(1px); pointer-events: none; z-index: 0;
    animation: firefly-float linear infinite;
  }
  @keyframes firefly-float {
    0%   { opacity:0; transform:translate(0,0); }
    10%  { opacity:0.8; }
    45%  { opacity:0.3; }
    55%  { opacity:0.9; }
    90%  { opacity:0.4; }
    100% { opacity:0; transform:translate(var(--dx),var(--dy)); }
  }

  /* ‚îÄ‚îÄ TIME WIDGET ‚îÄ‚îÄ */
  .time-widget { text-align: center; margin-bottom: 44px; }
  .time-display {
    font-family: 'Cormorant Garamond', serif; font-size: 54px; font-weight: 300;
    color: var(--gold2); letter-spacing: 6px;
    text-shadow: 0 0 40px rgba(201,168,76,0.5), 0 0 80px rgba(201,168,76,0.2);
  }
  .date-display {
    font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 5px;
    color: var(--muted); margin-top: 8px; text-transform: uppercase;
  }
  .phase-display {
    font-family: 'Cormorant Garamond', serif; font-style: italic;
    font-size: 13px; color: rgba(138,126,106,0.6); margin-top: 4px;
  }

  /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
  .card {
    background: linear-gradient(145deg,var(--panel) 0%,var(--panel2) 100%);
    border: 1px solid var(--border); border-radius: 18px;
    padding: 32px; margin-bottom: 20px; position: relative;
    overflow: hidden; backdrop-filter: blur(12px);
    transition: border-color 0.4s, box-shadow 0.4s, transform 0.3s;
  }
  .card:hover {
    border-color: rgba(201,168,76,0.32);
    box-shadow: 0 8px 60px rgba(0,0,0,0.4), 0 0 40px rgba(201,168,76,0.07);
    transform: translateY(-1px);
  }
  .card::before {
    content: ''; position: absolute; top:0; left:0; right:0; height:1px;
    background: linear-gradient(90deg,transparent,rgba(201,168,76,0.45),transparent);
  }
  .card::after {
    content: ''; position: absolute; bottom:0; left:0; right:0; height:1px;
    background: linear-gradient(90deg,transparent,rgba(201,168,76,0.1),transparent);
  }
  /* corner accents */
  .card .corner-tl,.card .corner-tr,.card .corner-bl,.card .corner-br {
    position: absolute; width:12px; height:12px;
    border-color: rgba(201,168,76,0.25); border-style: solid;
  }
  .card .corner-tl { top:8px; left:8px; border-width:1px 0 0 1px; }
  .card .corner-tr { top:8px; right:8px; border-width:1px 1px 0 0; }
  .card .corner-bl { bottom:8px; left:8px; border-width:0 0 1px 1px; }
  .card .corner-br { bottom:8px; right:8px; border-width:0 1px 1px 0; }

  .card-label {
    font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 5px;
    color: var(--gold); text-transform: uppercase;
    margin-bottom: 22px; display: flex; align-items: center; gap: 10px;
  }
  .card-label::after { content:''; flex:1; height:1px; background:var(--border); }

  /* ‚îÄ‚îÄ VERSE ‚îÄ‚îÄ */
  .verse-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(21px,3vw,28px); font-style: italic; font-weight: 300;
    color: var(--cream); line-height: 1.65; margin-bottom: 16px;
    text-shadow: 0 0 30px rgba(201,168,76,0.12);
  }
  .verse-ref { font-family:'Cinzel',serif; font-size:10px; letter-spacing:3px; color:var(--gold); }
  .verse-nav { display:flex; gap:10px; margin-top:22px; flex-wrap:wrap; }
  .btn-ghost {
    background: transparent; border: 1px solid var(--border); color: var(--muted);
    padding: 8px 18px; border-radius: 50px; font-family: 'Cinzel', serif;
    font-size: 9px; letter-spacing: 3px; text-transform: uppercase;
    cursor: pointer; transition: all 0.3s;
  }
  .btn-ghost:hover { border-color:var(--gold); color:var(--gold); box-shadow:0 0 20px rgba(201,168,76,0.15); }

  /* ‚îÄ‚îÄ SOAP ‚îÄ‚îÄ */
  .soap-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  @media(max-width:600px){.soap-grid{grid-template-columns:1fr;}}
  .soap-item label {
    font-family:'Cinzel',serif; font-size:9px; letter-spacing:4px;
    color:var(--gold); display:block; margin-bottom:8px;
  }
  .soap-item textarea,.big-input {
    width:100%; background:rgba(255,255,255,0.025); border:1px solid var(--border);
    border-radius:10px; color:var(--cream); font-family:'Cormorant Garamond',serif;
    font-size:15px; font-weight:300; padding:12px 14px; resize:vertical;
    min-height:90px; transition:border-color 0.3s,background 0.3s; line-height:1.65;
  }
  .soap-item textarea:focus,.big-input:focus {
    outline:none; border-color:rgba(201,168,76,0.4); background:rgba(201,168,76,0.025);
  }
  .soap-item textarea::placeholder,.big-input::placeholder { color:var(--muted); font-style:italic; }

  /* ‚îÄ‚îÄ GRATITUDE ‚îÄ‚îÄ */
  .gratitude-list { list-style:none; }
  .gratitude-item { display:flex; align-items:center; gap:12px; padding:10px 0; border-bottom:1px solid rgba(255,255,255,0.04); }
  .gratitude-num { font-family:'Cinzel',serif; font-size:9px; color:var(--gold); width:20px; flex-shrink:0; }
  .gratitude-input {
    flex:1; background:transparent; border:none; color:var(--cream);
    font-family:'Cormorant Garamond',serif; font-size:16px; font-weight:300; font-style:italic; padding:4px 0;
  }
  .gratitude-input:focus{outline:none;}
  .gratitude-input::placeholder{color:var(--muted);}

  /* ‚îÄ‚îÄ TIMER ‚îÄ‚îÄ */
  .timer-wrap { text-align:center; }
  .timer-presets { display:flex; gap:8px; justify-content:center; margin-bottom:16px; flex-wrap:wrap; }
  .preset-btn {
    background:transparent; border:1px solid var(--border); color:var(--muted);
    padding:5px 14px; border-radius:50px; font-family:'Cinzel',serif;
    font-size:8px; letter-spacing:2px; cursor:pointer; transition:all 0.3s;
  }
  .preset-btn:hover,.preset-btn.active { border-color:var(--gold); color:var(--gold); }
  .timer-controls { display:flex; gap:12px; justify-content:center; margin-top:20px; flex-wrap:wrap; }

  /* ‚îÄ‚îÄ SOUND ‚îÄ‚îÄ */
  .sound-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  @media(max-width:500px){.sound-grid{grid-template-columns:repeat(2,1fr);}}
  .sound-btn {
    background:rgba(255,255,255,0.025); border:1px solid var(--border); border-radius:14px;
    padding:20px 10px; text-align:center; cursor:pointer; transition:all 0.3s;
    color:var(--muted); font-family:'Cinzel',serif; font-size:8px; letter-spacing:2px;
  }
  .sound-btn .sicon { font-size:26px; display:block; margin-bottom:8px; transition:transform 0.3s; }
  .sound-btn:hover { border-color:var(--gold); color:var(--gold); background:rgba(201,168,76,0.05); }
  .sound-btn:hover .sicon { transform:scale(1.15); }
  .sound-btn.playing {
    border-color:var(--gold); color:var(--gold2); background:rgba(201,168,76,0.08);
    box-shadow:0 0 30px rgba(201,168,76,0.12), inset 0 0 20px rgba(201,168,76,0.05);
  }
  .sound-btn.playing .sicon { animation: pulse-icon 2s ease-in-out infinite; }
  @keyframes pulse-icon { 0%,100%{transform:scale(1);} 50%{transform:scale(1.12);} }
  .volume-row { display:flex; align-items:center; gap:12px; margin-top:16px; }
  .volume-row label { font-family:'Cinzel',serif; font-size:8px; letter-spacing:2px; color:var(--muted); white-space:nowrap; }
  input[type=range] {
    flex:1; -webkit-appearance:none; height:2px; outline:none; border-radius:2px;
    background:linear-gradient(90deg,var(--gold) var(--pct,50%),rgba(255,255,255,0.1) var(--pct,50%));
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance:none; width:14px; height:14px; background:var(--gold);
    border-radius:50%; cursor:pointer; box-shadow:0 0 10px rgba(201,168,76,0.6);
  }

  /* ‚îÄ‚îÄ PRAYER ‚îÄ‚îÄ */
  .prayer-items { display:flex; flex-direction:column; gap:8px; margin-bottom:16px; }
  .prayer-row {
    display:flex; align-items:center; gap:12px;
    background:rgba(255,255,255,0.02); border:1px solid var(--border);
    border-radius:10px; padding:10px 14px; transition:all 0.3s;
  }
  .prayer-row.answered { border-color:rgba(201,168,76,0.4); background:rgba(201,168,76,0.04); }
  .prayer-check {
    width:18px; height:18px; border:1px solid var(--border); border-radius:50%;
    cursor:pointer; flex-shrink:0; display:flex; align-items:center; justify-content:center;
    font-size:10px; transition:all 0.3s; color:transparent;
  }
  .prayer-row.answered .prayer-check { background:rgba(201,168,76,0.2); border-color:var(--gold); color:var(--gold); }
  .prayer-text-input {
    flex:1; background:transparent; border:none; color:var(--cream);
    font-family:'Cormorant Garamond',serif; font-size:15px; font-weight:300;
  }
  .prayer-text-input:focus{outline:none;}
  .prayer-text-input::placeholder{color:var(--muted);font-style:italic;}

  /* ‚îÄ‚îÄ MOOD ‚îÄ‚îÄ */
  .mood-grid { display:flex; gap:12px; flex-wrap:wrap; }
  .mood-btn {
    background:transparent; border:1px solid var(--border); border-radius:50%;
    width:54px; height:54px; font-size:24px; cursor:pointer; transition:all 0.3s;
    display:flex; align-items:center; justify-content:center;
  }
  .mood-btn:hover { transform:scale(1.12); border-color:var(--gold); background:rgba(201,168,76,0.05); }
  .mood-btn.selected { border-color:var(--gold); box-shadow:0 0 24px rgba(201,168,76,0.3); transform:scale(1.18); background:rgba(201,168,76,0.08); }
  .mood-note input {
    width:100%; background:rgba(255,255,255,0.025); border:1px solid var(--border);
    border-radius:10px; color:var(--cream); font-family:'Cormorant Garamond',serif;
    font-size:15px; font-weight:300; font-style:italic; padding:12px 14px;
  }
  .mood-note input:focus{outline:none;border-color:rgba(201,168,76,0.4);}
  .mood-note input::placeholder{color:var(--muted);}

  /* ‚îÄ‚îÄ MEMORY GAME ‚îÄ‚îÄ */
  .memory-verse-display {
    font-family:'Cormorant Garamond',serif; font-size:18px; font-style:italic;
    color:var(--muted); line-height:1.7; margin-bottom:16px;
  }
  .memory-blanks,.memory-slots { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:16px; }
  .memory-slots {
    min-height:46px; padding:12px; border:1px dashed rgba(201,168,76,0.2); border-radius:10px;
  }
  .word-chip {
    background:rgba(255,255,255,0.04); border:1px solid var(--border); border-radius:50px;
    padding:6px 14px; font-family:'Cormorant Garamond',serif; font-size:15px;
    cursor:pointer; transition:all 0.25s; color:var(--cream);
  }
  .word-chip:hover{border-color:var(--gold);color:var(--gold);background:rgba(201,168,76,0.05);}
  .word-chip.used{opacity:0.2;pointer-events:none;}
  .mem-slot {
    background:rgba(201,168,76,0.08); border:1px solid rgba(201,168,76,0.3); border-radius:50px;
    padding:6px 14px; font-family:'Cormorant Garamond',serif; font-size:15px; color:var(--gold2); cursor:pointer;
  }
  .memory-feedback { font-family:'Cormorant Garamond',serif; font-size:16px; font-style:italic; text-align:center; min-height:24px; color:var(--gold2); }

  /* ‚îÄ‚îÄ REFLECTION ‚îÄ‚îÄ */
  .reflection-questions { display:flex; flex-direction:column; gap:20px; }
  .refl-q label { font-family:'Cormorant Garamond',serif; font-style:italic; font-size:16px; color:var(--muted); display:block; margin-bottom:8px; }
  .refl-q textarea {
    width:100%; background:rgba(255,255,255,0.025); border:1px solid var(--border); border-radius:10px;
    color:var(--cream); font-family:'Cormorant Garamond',serif; font-size:15px; font-weight:300;
    padding:12px 14px; resize:vertical; min-height:80px; transition:border-color 0.3s; line-height:1.65;
  }
  .refl-q textarea:focus{outline:none;border-color:rgba(201,168,76,0.4);}
  .refl-q textarea::placeholder{color:var(--muted);font-style:italic;}

  /* ‚îÄ‚îÄ STREAK ‚îÄ‚îÄ */
  .streak-row { display:flex; align-items:center; gap:20px; flex-wrap:wrap; }
  .streak-num { font-family:'Cormorant Garamond',serif; font-size:56px; font-weight:300; color:var(--gold2); line-height:1; text-shadow:0 0 30px rgba(201,168,76,0.4); }
  .streak-label { font-family:'Cinzel',serif; font-size:9px; letter-spacing:4px; color:var(--muted); text-transform:uppercase; margin-bottom:4px; }
  .streak-desc { font-family:'Cormorant Garamond',serif; font-style:italic; font-size:14px; color:var(--muted); }
  .week-dots { display:flex; gap:8px; margin-top:16px; flex-wrap:wrap; }
  .week-dot {
    width:34px; height:34px; border-radius:50%; border:1px solid var(--border);
    display:flex; align-items:center; justify-content:center;
    font-family:'Cinzel',serif; font-size:7px; color:var(--muted); cursor:pointer; transition:all 0.3s;
  }
  .week-dot.done { background:rgba(201,168,76,0.15); border-color:var(--gold); color:var(--gold); box-shadow:0 0 12px rgba(201,168,76,0.2); }

  /* ‚îÄ‚îÄ DIVIDER ‚îÄ‚îÄ */
  .section-divider { display:flex; align-items:center; gap:20px; margin:44px 0 32px; }
  .section-divider span { font-family:'Cinzel',serif; font-size:9px; letter-spacing:6px; color:var(--muted); text-transform:uppercase; white-space:nowrap; }
  .section-divider::before,.section-divider::after { content:''; flex:1; height:1px; background:linear-gradient(90deg,transparent,rgba(201,168,76,0.2),transparent); }

  /* ‚îÄ‚îÄ CROSS ORNAMENT ‚îÄ‚îÄ */
  .cross-ornament { text-align:center; color:rgba(201,168,76,0.3); font-size:22px; margin:4px 0; }

  /* ‚îÄ‚îÄ HISTORY SECTION ‚îÄ‚îÄ */
  .history-nav { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; align-items:center; }
  .history-nav select {
    background:rgba(255,255,255,0.03); border:1px solid var(--border); border-radius:10px;
    color:var(--cream); font-family:'Cormorant Garamond',serif; font-size:15px; font-style:italic;
    padding:9px 14px; cursor:pointer; flex:1; min-width:180px; outline:none;
    -webkit-appearance:none; appearance:none;
  }
  .history-nav select option { background:#15121f; color:var(--cream); }
  .history-entry { display:none; }
  .history-entry.active { display:block; }
  .history-date-badge {
    display:inline-block; font-family:'Cinzel',serif; font-size:9px; letter-spacing:4px;
    color:var(--gold); border:1px solid rgba(201,168,76,0.3); border-radius:50px;
    padding:5px 16px; margin-bottom:20px; background:rgba(201,168,76,0.05);
  }
  .history-block { margin-bottom:20px; }
  .history-block-label {
    font-family:'Cinzel',serif; font-size:8px; letter-spacing:4px; color:var(--muted);
    text-transform:uppercase; margin-bottom:8px;
  }
  .history-block-text {
    font-family:'Cormorant Garamond',serif; font-size:15px; font-style:italic;
    color:var(--cream); line-height:1.7; opacity:0.9;
  }
  .history-block-text.empty { color:var(--muted); opacity:0.5; }
  .history-mood-display { font-size:28px; }
  .history-gratitude-list { list-style:none; }
  .history-gratitude-list li {
    font-family:'Cormorant Garamond',serif; font-size:15px; font-style:italic;
    color:var(--cream); padding:6px 0; border-bottom:1px solid rgba(255,255,255,0.04);
    display:flex; gap:10px;
  }
  .history-gratitude-list li span { color:var(--gold); font-style:normal; font-family:'Cinzel',serif; font-size:9px; width:20px; flex-shrink:0; }
  .history-soap-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
  @media(max-width:600px){.history-soap-grid{grid-template-columns:1fr;}}
  .history-soap-item { background:rgba(255,255,255,0.02); border:1px solid var(--border); border-radius:10px; padding:12px 14px; }
  .history-soap-item .hs-label { font-family:'Cinzel',serif; font-size:8px; letter-spacing:3px; color:var(--gold); margin-bottom:6px; }
  .history-soap-item .hs-text { font-family:'Cormorant Garamond',serif; font-size:14px; font-style:italic; color:var(--cream); line-height:1.6; }
  .history-empty {
    text-align:center; padding:40px 20px;
    font-family:'Cormorant Garamond',serif; font-style:italic; font-size:18px; color:var(--muted);
  }
  .history-timeline {
    position: relative; padding-left: 28px;
  }
  .history-timeline::before {
    content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 1px;
    background: linear-gradient(180deg, transparent, rgba(201,168,76,0.3), transparent);
  }
  .timeline-dot {
    position: absolute; left: 3px; top: 2px; width: 11px; height: 11px;
    border-radius: 50%; border: 1px solid var(--gold); background: rgba(201,168,76,0.2);
    box-shadow: 0 0 8px rgba(201,168,76,0.3);
  }
  .history-tabs { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:20px; }
  .htab {
    background:transparent; border:1px solid var(--border); color:var(--muted);
    padding:6px 14px; border-radius:50px; font-family:'Cinzel',serif;
    font-size:8px; letter-spacing:2px; cursor:pointer; transition:all 0.3s;
  }
  .htab:hover,.htab.active { border-color:var(--gold); color:var(--gold); }

  /* ‚îÄ‚îÄ SAVE / FOOTER ‚îÄ‚îÄ */
  .save-bar { display:flex; justify-content:center; gap:16px; margin:44px 0 12px; flex-wrap:wrap; }
  .btn-gold {
    background:linear-gradient(135deg,#c9a84c 0%,#e8c97a 50%,#c9a84c 100%);
    border:none; border-radius:50px; color:#080710;
    font-family:'Cinzel',serif; font-size:10px; letter-spacing:4px; text-transform:uppercase;
    padding:15px 36px; cursor:pointer; font-weight:500;
    box-shadow:0 4px 30px rgba(201,168,76,0.35); transition:all 0.3s;
  }
  .btn-gold:hover { box-shadow:0 8px 50px rgba(201,168,76,0.55); transform:translateY(-2px); }
  .save-msg {
    font-family:'Cormorant Garamond',serif; font-style:italic; color:var(--gold);
    font-size:15px; opacity:0; transition:opacity 0.5s; text-align:center; margin:0 0 8px;
  }

  footer { text-align:center; padding:44px 0 60px; border-top:1px solid var(--border); margin-top:20px; }
  .footer-brand { font-family:'Cinzel',serif; font-size:11px; letter-spacing:5px; color:var(--gold); margin-bottom:16px; }
  .footer-links { display:flex; justify-content:center; gap:28px; flex-wrap:wrap; }
  .footer-links a { color:var(--muted); text-decoration:none; font-family:'Cinzel',serif; font-size:9px; letter-spacing:3px; transition:color 0.3s; }
  .footer-links a:hover { color:var(--gold); }
  .footer-copy { font-family:'Cormorant Garamond',serif; font-style:italic; color:rgba(138,126,106,0.35); font-size:12px; margin-top:16px; }

  /* ‚îÄ‚îÄ TWO COL ‚îÄ‚îÄ */
  .two-col { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
  @media(max-width:650px){.two-col{grid-template-columns:1fr;}}

  /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
  .toast {
    position:fixed; bottom:30px; left:50%;
    transform:translateX(-50%) translateY(20px);
    background:linear-gradient(135deg,#1c1828,#12101c);
    border:1px solid var(--gold); border-radius:50px;
    padding:12px 28px; font-family:'Cinzel',serif; font-size:9px;
    letter-spacing:3px; color:var(--gold); opacity:0; transition:all 0.4s;
    z-index:1000; white-space:nowrap; box-shadow:0 8px 40px rgba(0,0,0,0.6);
  }
  .toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

  /* ‚îÄ‚îÄ SCROLL APPEAR ‚îÄ‚îÄ */
  .appear { opacity:0; transform:translateY(28px); transition:opacity 0.8s ease,transform 0.8s ease; }
  .appear.visible { opacity:1; transform:translateY(0); }

  /* ‚îÄ‚îÄ DECORATIVE ELEMENTS ‚îÄ‚îÄ */
  .ornament-cross {
    text-align:center; font-size:18px; color:rgba(201,168,76,0.25); margin:8px 0;
    letter-spacing:16px;
  }
  .sparkle {
    position:fixed; pointer-events:none; z-index:0;
    width:4px; height:4px; border-radius:50%; background:var(--gold2);
    filter:blur(1px); opacity:0; animation:sparkle-anim ease-out forwards;
  }
  @keyframes sparkle-anim {
    0%{opacity:0;transform:scale(0) translate(0,0);}
    30%{opacity:0.9;}
    100%{opacity:0;transform:scale(1.5) translate(var(--sx),var(--sy));}
  }

  /* CLOUD WISPS */
  .cloud-wisp {
    position:fixed; pointer-events:none; z-index:0;
    border-radius:50%; filter:blur(60px); opacity:0.03;
    animation:cloud-drift linear infinite;
  }
  @keyframes cloud-drift {
    from{transform:translateX(-200px);}
    to{transform:translateX(calc(100vw + 200px));}
  }

  /* PHASE BAR */
  .moon-phase-bar {
    display:flex; align-items:center; gap:10px; justify-content:center;
    margin-top:10px; flex-wrap:wrap;
  }
  .moon-phase-bar span {
    font-family:'Cinzel',serif; font-size:8px; letter-spacing:3px;
    color:rgba(138,126,106,0.5); text-transform:uppercase;
  }
  .moon-phases-dots { display:flex; gap:6px; }
  .mphase-dot {
    width:20px; height:20px; border-radius:50%; border:1px solid rgba(201,168,76,0.2);
    font-size:12px; display:flex; align-items:center; justify-content:center;
    cursor:default; transition:transform 0.3s;
  }
  .mphase-dot:hover{transform:scale(1.3);}
</style>
</head>
<body>

<!-- BG LAYERS -->
<canvas id="stars-canvas"></canvas>
<canvas id="moon-canvas" width="100" height="100"></canvas>

<div class="aurora">
  <div class="aurora-blob"></div>
  <div class="aurora-blob"></div>
  <div class="aurora-blob"></div>
  <div class="aurora-blob"></div>
</div>

<!-- CLOUD WISPS -->
<div class="cloud-wisp" style="width:400px;height:200px;background:#c9a84c;top:20%;animation-duration:80s;animation-delay:-20s;"></div>
<div class="cloud-wisp" style="width:300px;height:150px;background:#2a2460;top:60%;animation-duration:110s;animation-delay:-55s;"></div>

<div class="container">

  <!-- HEADER -->
  <header class="appear">
    <div class="header-ornament">
      <div class="ornament-line"></div>
      <div class="brand">‚ú¶ faithreflects ‚ú¶</div>
      <div class="ornament-line r"></div>
    </div>
    <h1 class="main-title">Evening Devotional</h1>
    <div class="sub-title">A Sacred Space for Night's Reflection</div>
    <div class="gold-line"></div>
    <div class="header-verse">"He who dwells in the shelter of the Most High will rest in the shadow of the Almighty." ‚Äî Psalm 91:1</div>

    <!-- MULTI-CANDLE SCENE -->
    <div class="candle-scene">
      <div class="candle candle-sm">
        <div class="flame-glow"></div>
        <div class="flame"></div>
        <div class="candle-wick"></div>
        <div class="candle-body"></div>
      </div>
      <div class="candle candle-md">
        <div class="flame-glow"></div>
        <div class="flame"></div>
        <div class="candle-wick"></div>
        <div class="candle-body"></div>
      </div>
      <div class="candle candle-lg">
        <div class="flame-glow"></div>
        <div class="flame"></div>
        <div class="candle-wick"></div>
        <div class="candle-body"></div>
      </div>
      <div class="candle candle-md">
        <div class="flame-glow"></div>
        <div class="flame"></div>
        <div class="candle-wick"></div>
        <div class="candle-body"></div>
      </div>
      <div class="candle candle-sm">
        <div class="flame-glow"></div>
        <div class="flame"></div>
        <div class="candle-wick"></div>
        <div class="candle-body"></div>
      </div>
      <div class="candle-table"></div>
    </div>
  </header>

  <!-- TIME + MOON PHASE -->
  <div class="time-widget appear">
    <div class="time-display" id="clock">--:--</div>
    <div class="date-display" id="dateDisplay">‚Äî</div>
    <div class="moon-phase-bar">
      <span>Tonight's Sky</span>
      <div class="moon-phases-dots" id="moonPhaseDots"></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE 1 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  <!-- EVENING VERSE -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Evening Verse</div>
    <div class="verse-text" id="verseText">"He grants sleep to those he loves."</div>
    <div class="verse-ref" id="verseRef">‚Äî Psalm 127:2</div>
    <div class="verse-nav">
      <button class="btn-ghost" onclick="changeVerse(-1)">‚Üê Previous</button>
      <button class="btn-ghost" onclick="changeVerse(1)">New Verse ‚Üí</button>
      <button class="btn-ghost" onclick="toggleFavoriteVerse()" id="favVerseBtn">‚òÜ Favorite</button>
    </div>
  </div>

  <!-- MOOD + STREAK -->
  <div class="two-col">
    <div class="card appear">
      <div class="corner-tl"></div><div class="corner-tr"></div>
      <div class="corner-bl"></div><div class="corner-br"></div>
      <div class="card-label">‚ú¶ Evening Mood</div>
      <div class="mood-grid">
        <button class="mood-btn" onclick="selectMood(this,'üòî')" title="Heavy">üòî</button>
        <button class="mood-btn" onclick="selectMood(this,'üòê')" title="Neutral">üòê</button>
        <button class="mood-btn" onclick="selectMood(this,'üôè')" title="Prayerful">üôè</button>
        <button class="mood-btn" onclick="selectMood(this,'üòå')" title="Peaceful">üòå</button>
        <button class="mood-btn" onclick="selectMood(this,'üòä')" title="Grateful">üòä</button>
        <button class="mood-btn" onclick="selectMood(this,'‚ú®')" title="Blessed">‚ú®</button>
      </div>
      <div class="mood-note" style="margin-top:16px">
        <input type="text" id="moodNote" placeholder="What's on your heart tonight?" oninput="saveData()">
      </div>
    </div>

    <div class="card appear">
      <div class="corner-tl"></div><div class="corner-tr"></div>
      <div class="corner-bl"></div><div class="corner-br"></div>
      <div class="card-label">‚ú¶ Devotion Streak</div>
      <div class="streak-row">
        <div class="streak-num" id="streakNum">0</div>
        <div class="streak-info">
          <div class="streak-label">Days in a row</div>
          <div class="streak-desc" id="streakMsg">Begin your journey tonight</div>
        </div>
      </div>
      <div class="week-dots" id="weekDots"></div>
      <button class="btn-ghost" style="margin-top:16px;font-size:8px" onclick="markToday()">Mark Tonight ‚ú¶</button>
    </div>
  </div>

  <!-- AMBIENT SANCTUARY -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Ambient Sanctuary</div>
    <div class="sound-grid">
      <button class="sound-btn" onclick="toggleSound(this,'rain')">
        <span class="sicon">üåßÔ∏è</span>Gentle Rain
      </button>
      <button class="sound-btn" onclick="toggleSound(this,'fire')">
        <span class="sicon">üî•</span>Fireplace
      </button>
      <button class="sound-btn" onclick="toggleSound(this,'wind')">
        <span class="sicon">üåø</span>Night Wind
      </button>
      <button class="sound-btn" onclick="toggleSound(this,'bells')">
        <span class="sicon">üîî</span>Chapel Bells
      </button>
      <button class="sound-btn" onclick="toggleSound(this,'ocean')">
        <span class="sicon">üåä</span>Still Waters
      </button>
      <button class="sound-btn" onclick="toggleSound(this,'crickets')">
        <span class="sicon">üåô</span>Night Crickets
      </button>
    </div>
    <div class="volume-row">
      <label>Volume</label>
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" oninput="setVolume(this.value)">
    </div>
  </div>

  <!-- THANKSGIVING JOURNAL -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Thanksgiving Journal</div>
    <p style="font-family:'Cormorant Garamond',serif;font-style:italic;color:var(--muted);font-size:14px;margin-bottom:20px">"In everything give thanks." ‚Äî 1 Thess 5:18</p>
    <ul class="gratitude-list">
      <li class="gratitude-item"><span class="gratitude-num">I.</span><input class="gratitude-input" type="text" placeholder="I'm grateful for‚Ä¶" oninput="saveData()"></li>
      <li class="gratitude-item"><span class="gratitude-num">II.</span><input class="gratitude-input" type="text" placeholder="Today I noticed God's hand in‚Ä¶" oninput="saveData()"></li>
      <li class="gratitude-item"><span class="gratitude-num">III.</span><input class="gratitude-input" type="text" placeholder="A blessing I almost missed‚Ä¶" oninput="saveData()"></li>
      <li class="gratitude-item"><span class="gratitude-num">IV.</span><input class="gratitude-input" type="text" placeholder="Someone I'm thankful for‚Ä¶" oninput="saveData()"></li>
      <li class="gratitude-item"><span class="gratitude-num">V.</span><input class="gratitude-input" type="text" placeholder="One small grace today‚Ä¶" oninput="saveData()"></li>
    </ul>
  </div>

  <div class="section-divider appear"><span>‚ú¶ Deepen Your Word ‚ú¶</span></div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE 2 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

  <!-- SOAP -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ S.O.A.P Bible Study</div>
    <div style="margin-bottom:16px">
      <label style="font-family:'Cinzel',serif;font-size:9px;letter-spacing:4px;color:var(--gold);display:block;margin-bottom:8px">Scripture Reference</label>
      <input type="text" id="soapRef" placeholder="e.g. John 3:16 ¬∑ Psalm 23 ¬∑ Isaiah 40:31"
        style="width:100%;background:rgba(255,255,255,0.025);border:1px solid var(--border);border-radius:10px;color:var(--cream);font-family:'Cormorant Garamond',serif;font-size:15px;padding:12px 14px;outline:none;" oninput="saveData()">
    </div>
    <div class="soap-grid">
      <div class="soap-item"><label>S ‚Äî Scripture</label><textarea id="soapS" placeholder="Write out the verse in your own words‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="soap-item"><label>O ‚Äî Observation</label><textarea id="soapO" placeholder="What do you notice? Who, what, when, where‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="soap-item"><label>A ‚Äî Application</label><textarea id="soapA" placeholder="How does this apply to your life tonight‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="soap-item"><label>P ‚Äî Prayer</label><textarea id="soapP" placeholder="Respond to God in prayer based on this verse‚Ä¶" oninput="saveData()"></textarea></div>
    </div>
  </div>

  <!-- PRAYER TIMER -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Prayer Sanctuary Timer</div>
    <div class="timer-wrap">
      <div class="timer-presets">
        <button class="preset-btn active" onclick="setTimer(300,this)">5 min</button>
        <button class="preset-btn" onclick="setTimer(600,this)">10 min</button>
        <button class="preset-btn" onclick="setTimer(900,this)">15 min</button>
        <button class="preset-btn" onclick="setTimer(1200,this)">20 min</button>
      </div>
      <svg width="170" height="170" viewBox="0 0 170 170" style="display:block;margin:0 auto 16px">
        <circle cx="85" cy="85" r="75" fill="none" stroke="rgba(255,255,255,0.04)" stroke-width="7"/>
        <!-- outer decorative ring -->
        <circle cx="85" cy="85" r="82" fill="none" stroke="rgba(201,168,76,0.08)" stroke-width="1" stroke-dasharray="4 6"/>
        <circle id="timerArc" cx="85" cy="85" r="75" fill="none" stroke="url(#goldGrad2)" stroke-width="7"
          stroke-linecap="round" stroke-dasharray="471.24" stroke-dashoffset="0" transform="rotate(-90 85 85)"/>
        <defs>
          <linearGradient id="goldGrad2" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#c9a84c"/>
            <stop offset="100%" stop-color="#e8c97a"/>
          </linearGradient>
        </defs>
        <text x="85" y="80" text-anchor="middle" font-family="'Cormorant Garamond',serif" font-size="30" fill="#e8c97a" id="timerText">5:00</text>
        <text x="85" y="100" text-anchor="middle" font-family="'Cinzel',serif" font-size="8" fill="#8a7e6a" letter-spacing="3" id="timerStatusText">READY</text>
      </svg>
      <div class="timer-controls">
        <button class="btn-ghost" onclick="startTimer()">‚ñ∑ Begin Prayer</button>
        <button class="btn-ghost" onclick="pauseTimer()">‚è∏ Pause</button>
        <button class="btn-ghost" onclick="resetTimer()">‚Ü∫ Reset</button>
      </div>
    </div>
  </div>

  <!-- PRAYER REQUESTS -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Prayer Requests & Answered Prayers</div>
    <div class="prayer-items" id="prayerItems"></div>
    <button class="btn-ghost" onclick="addPrayer()" style="font-size:9px">+ Add Prayer Request</button>
  </div>

  <div class="section-divider appear"><span>‚ú¶ Renew Your Mind ‚ú¶</span></div>

  <!-- SCRIPTURE MEMORY GAME -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Scripture Memory Game</div>
    <p style="font-family:'Cormorant Garamond',serif;font-style:italic;color:var(--muted);font-size:14px;margin-bottom:16px">Arrange the words to complete the verse ‚Äî click words to place them</p>
    <div class="memory-verse-display" id="memVerseHint"></div>
    <p style="font-family:'Cinzel',serif;font-size:8px;letter-spacing:3px;color:var(--muted);margin-bottom:10px">YOUR ANSWER ‚Üì</p>
    <div class="memory-slots" id="memSlots" onclick="removeWord(event)"></div>
    <p style="font-family:'Cinzel',serif;font-size:8px;letter-spacing:3px;color:var(--muted);margin-bottom:10px">WORD BANK ‚Üì</p>
    <div class="memory-blanks" id="memBlanks"></div>
    <div class="memory-feedback" id="memFeedback"></div>
    <div style="display:flex;gap:12px;margin-top:16px;flex-wrap:wrap">
      <button class="btn-ghost" onclick="checkMemory()">‚ú¶ Check Answer</button>
      <button class="btn-ghost" onclick="nextMemVerse()">Next Verse ‚Üí</button>
    </div>
  </div>

  <!-- EVENING REFLECTION -->
  <div class="card appear">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Evening Reflection</div>
    <div class="reflection-questions">
      <div class="refl-q"><label>Where did I see God's presence today?</label><textarea id="refl1" placeholder="Write your reflection‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="refl-q"><label>What do I need to surrender to God tonight?</label><textarea id="refl2" placeholder="Lay it down here‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="refl-q"><label>How did I show love to others today?</label><textarea id="refl3" placeholder="Reflect gently‚Ä¶" oninput="saveData()"></textarea></div>
      <div class="refl-q"><label>One word for tomorrow ‚Äî a prayer intention</label><textarea id="refl4" placeholder="Peace ¬∑ Trust ¬∑ Joy ¬∑ Courage‚Ä¶" oninput="saveData()" style="min-height:60px"></textarea></div>
    </div>
  </div>

  <!-- SAVE -->
  <div class="save-bar">
    <button class="btn-gold" onclick="saveData(true)">‚ú¶ Save This Evening</button>
    <button class="btn-ghost" onclick="clearToday()" style="padding:14px 24px">Clear Tonight</button>
  </div>
  <div class="save-msg" id="saveMsg">Your evening has been saved. Rest well, beloved. ‚ú¶</div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HISTORY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="section-divider appear"><span>‚ú¶ Past Evenings ‚ú¶</span></div>

  <div class="card appear" id="historyCard">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="card-label">‚ú¶ Evening Archive</div>
    <p style="font-family:'Cormorant Garamond',serif;font-style:italic;color:var(--muted);font-size:14px;margin-bottom:20px">
      "Remember the great things He has done." ‚Äî 1 Chronicles 16:12
    </p>

    <div class="history-nav">
      <select id="historySelect" onchange="loadHistoryEntry(this.value)">
        <option value="">‚Äî Select an evening ‚Äî</option>
      </select>
      <button class="btn-ghost" onclick="exportHistory()" style="font-size:8px;white-space:nowrap">‚Üì Export</button>
    </div>

    <div id="historyDisplay">
      <div class="history-empty">‚ú¶<br><br>Your past evenings will appear here<br>once you save your first devotional.</div>
    </div>
  </div>

  <!-- CLOSING CARD -->
  <div class="card appear" style="text-align:center;background:linear-gradient(145deg,rgba(92,26,46,0.25) 0%,rgba(21,18,31,0.9) 100%);border-color:rgba(92,26,46,0.3)">
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
    <div class="ornament-cross">‚úü ‚ú¶ ‚úü</div>
    <div style="font-family:'Cormorant Garamond',serif;font-size:24px;font-style:italic;color:var(--cream);line-height:1.6;margin:20px 0">
      "He gives strength to the weary and increases the power of the weak."
    </div>
    <div style="font-family:'Cinzel',serif;font-size:9px;letter-spacing:4px;color:var(--gold)">‚Äî Isaiah 40:29</div>
    <div class="gold-line"></div>
    <div style="font-family:'Cinzel',serif;font-size:8px;letter-spacing:5px;color:var(--muted)">Sleep in His peace tonight</div>
  </div>

  <footer>
    <div class="footer-brand">‚ú¶ faithreflects ‚ú¶</div>
    <div class="footer-links">
      <a href="https://instagram.com/faithreflects" target="_blank">‚ú¶ Instagram</a>
      <a href="https://www.etsy.com/shop/faithreflects" target="_blank">‚ú¶ Etsy Shop</a>
      <a href="https://faithreflects.gumroad.com" target="_blank">‚ú¶ Gumroad</a>
    </div>
    <div class="footer-copy">Crafted with love & faith ¬∑ ¬© faithreflects</div>
  </footer>

</div>

<div class="toast" id="toast"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STARFIELD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const sc = document.getElementById('stars-canvas');
const sx = sc.getContext('2d');
let stars = [];
function resizeSC(){ sc.width=window.innerWidth; sc.height=window.innerHeight; }
function initStars(){
  stars=[];
  for(let i=0;i<220;i++) stars.push({
    x:Math.random()*sc.width, y:Math.random()*sc.height,
    r:Math.random()*1.6+0.2, alpha:Math.random(),
    speed:Math.random()*0.004+0.0015, phase:Math.random()*Math.PI*2
  });
}
function drawStars(t){
  sx.clearRect(0,0,sc.width,sc.height);
  stars.forEach(s=>{
    s.alpha=0.25+0.6*Math.sin(t*s.speed+s.phase);
    sx.beginPath(); sx.arc(s.x,s.y,s.r,0,Math.PI*2);
    // vary color slightly ‚Äî some stars slightly blue/warm
    const warm = s.r > 1.2;
    sx.fillStyle=warm?`rgba(240,225,190,${s.alpha})`:`rgba(220,230,255,${s.alpha})`;
    sx.fill();
    // cross spike for bigger stars
    if(s.r>1.4){
      sx.strokeStyle=`rgba(255,240,210,${s.alpha*0.4})`;
      sx.lineWidth=0.5;
      sx.beginPath(); sx.moveTo(s.x-4,s.y); sx.lineTo(s.x+4,s.y); sx.stroke();
      sx.beginPath(); sx.moveTo(s.x,s.y-4); sx.lineTo(s.x,s.y+4); sx.stroke();
    }
  });
  requestAnimationFrame(drawStars);
}
resizeSC(); initStars();
window.addEventListener('resize',()=>{resizeSC();initStars();});
requestAnimationFrame(drawStars);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MOON CANVAS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const mc = document.getElementById('moon-canvas');
const mx = mc.getContext('2d');
function drawMoon(){
  mx.clearRect(0,0,100,100);
  // outer glow
  const glow=mx.createRadialGradient(50,50,25,50,50,50);
  glow.addColorStop(0,'rgba(230,200,120,0.15)');
  glow.addColorStop(1,'transparent');
  mx.fillStyle=glow; mx.beginPath(); mx.arc(50,50,50,0,Math.PI*2); mx.fill();
  // moon body
  const grad=mx.createRadialGradient(42,42,4,50,50,32);
  grad.addColorStop(0,'#f5e8c0');
  grad.addColorStop(0.5,'#dfc87a');
  grad.addColorStop(1,'#a08030');
  mx.fillStyle=grad; mx.beginPath(); mx.arc(50,50,30,0,Math.PI*2); mx.fill();
  // crescent shadow
  mx.fillStyle='rgba(8,7,16,0.6)';
  mx.beginPath(); mx.arc(62,50,26,0,Math.PI*2); mx.fill();
  // craters
  mx.fillStyle='rgba(120,90,30,0.3)';
  mx.beginPath(); mx.arc(36,44,4,0,Math.PI*2); mx.fill();
  mx.beginPath(); mx.arc(32,58,2.5,0,Math.PI*2); mx.fill();
  mx.beginPath(); mx.arc(42,62,3,0,Math.PI*2); mx.fill();
}
drawMoon();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MOON PHASE DOTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const moonPhases=['üåë','üåí','üåì','üåî','üåï','üåñ','üåó','üåò'];
function renderMoonPhase(){
  const wrap=document.getElementById('moonPhaseDots');
  const now=new Date();
  // crude lunar cycle calc (29.5 day period)
  const lc=(now-new Date(2000,0,6))/86400000/29.53058;
  const phase=Math.floor((lc-Math.floor(lc))*8);
  wrap.innerHTML='';
  moonPhases.forEach((m,i)=>{
    const d=document.createElement('div');
    d.className='mphase-dot';
    d.textContent=m;
    if(i===phase) d.style.cssText='transform:scale(1.4);filter:drop-shadow(0 0 6px rgba(201,168,76,0.8))';
    d.title=(['New Moon','Waxing Crescent','First Quarter','Waxing Gibbous','Full Moon','Waning Gibbous','Last Quarter','Waning Crescent'])[i];
    wrap.appendChild(d);
  });
}
renderMoonPhase();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SHOOTING STARS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function shootingStar(){
  const el=document.createElement('div');
  el.className='shooting-star';
  const startX=Math.random()*window.innerWidth;
  const startY=Math.random()*window.innerHeight*0.5;
  el.style.cssText=`left:${startX}px;top:${startY}px;opacity:0`;
  document.body.appendChild(el);
  const angle=30+Math.random()*20;
  const dist=200+Math.random()*300;
  const dx=Math.cos(angle*Math.PI/180)*dist;
  const dy=Math.sin(angle*Math.PI/180)*dist;
  const dur=600+Math.random()*400;
  let start=null;
  function anim(ts){
    if(!start)start=ts;
    const p=Math.min((ts-start)/dur,1);
    const ease=p<0.1?p*10:p>0.9?(1-p)*10:1;
    el.style.opacity=ease*0.9;
    el.style.transform=`translate(${dx*p}px,${dy*p}px) scaleX(${4+p*12})`;
    if(p<1){requestAnimationFrame(anim);}else{el.remove();}
  }
  requestAnimationFrame(anim);
}
setInterval(()=>{if(Math.random()<0.4)shootingStar();},3500);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FIREFLIES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function spawnFirefly(){
  const el=document.createElement('div');
  el.className='firefly';
  const x=Math.random()*window.innerWidth;
  const y=window.innerHeight*0.3+Math.random()*window.innerHeight*0.6;
  const dx=(Math.random()-0.5)*150;
  const dy=(Math.random()-0.5)*100;
  const dur=4+Math.random()*6;
  el.style.cssText=`left:${x}px;top:${y}px;--dx:${dx}px;--dy:${dy}px;animation-duration:${dur}s;animation-delay:${Math.random()*dur}s`;
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),(dur+2)*1000);
}
for(let i=0;i<12;i++)spawnFirefly();
setInterval(spawnFirefly,2000);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CLOCK
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateClock(){
  const n=new Date();
  const h=String(n.getHours()).padStart(2,'0');
  const m=String(n.getMinutes()).padStart(2,'0');
  const s=String(n.getSeconds()).padStart(2,'0');
  document.getElementById('clock').textContent=`${h}:${m}:${s}`;
  const D=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
  const M=['January','February','March','April','May','June','July','August','September','October','November','December'];
  document.getElementById('dateDisplay').textContent=`${D[n.getDay()]} ¬∑ ${M[n.getMonth()]} ${n.getDate()}, ${n.getFullYear()}`;
}
setInterval(updateClock,1000); updateClock();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// VERSES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const verses=[
  {text:'"He grants sleep to those he loves."',ref:'‚Äî Psalm 127:2'},
  {text:'"Be still, and know that I am God."',ref:'‚Äî Psalm 46:10'},
  {text:'"Come to me, all you who are weary and burdened, and I will give you rest."',ref:'‚Äî Matthew 11:28'},
  {text:'"The Lord bless you and keep you; the Lord make his face shine on you."',ref:'‚Äî Numbers 6:24‚Äì25'},
  {text:'"Your word is a lamp for my feet, a light on my path."',ref:'‚Äî Psalm 119:105'},
  {text:'"Cast all your anxiety on him because he cares for you."',ref:'‚Äî 1 Peter 5:7'},
  {text:'"He gives strength to the weary and increases the power of the weak."',ref:'‚Äî Isaiah 40:29'},
  {text:'"In peace I will lie down and sleep, for you alone, Lord, make me dwell in safety."',ref:'‚Äî Psalm 4:8'},
  {text:'"The Lord is my shepherd, I lack nothing. He makes me lie down in green pastures."',ref:'‚Äî Psalm 23:1‚Äì2'},
  {text:'"Do not be anxious about anything, but in every situation present your requests to God."',ref:'‚Äî Philippians 4:6'},
  {text:'"The Lord is close to the brokenhearted and saves those who are crushed in spirit."',ref:'‚Äî Psalm 34:18'},
  {text:'"He heals the brokenhearted and binds up their wounds."',ref:'‚Äî Psalm 147:3'},
];
let verseIndex=parseInt(localStorage.getItem('fr_verseIndex')||'0');
let favoriteVerses=JSON.parse(localStorage.getItem('fr_favVerses')||'[]');
function renderVerse(){
  document.getElementById('verseText').textContent=verses[verseIndex].text;
  document.getElementById('verseRef').textContent=verses[verseIndex].ref;
  document.getElementById('favVerseBtn').textContent=favoriteVerses.includes(verseIndex)?'‚òÖ Favorited':'‚òÜ Favorite';
}
function changeVerse(d){verseIndex=(verseIndex+d+verses.length)%verses.length;localStorage.setItem('fr_verseIndex',verseIndex);renderVerse();}
function toggleFavoriteVerse(){
  const i=favoriteVerses.indexOf(verseIndex);
  if(i===-1)favoriteVerses.push(verseIndex);else favoriteVerses.splice(i,1);
  localStorage.setItem('fr_favVerses',JSON.stringify(favoriteVerses));
  renderVerse();
  showToast(favoriteVerses.includes(verseIndex)?'Added to favorites ‚òÖ':'Removed from favorites');
}
renderVerse();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MOOD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let selectedMoodEmoji='';
function selectMood(btn,emoji){
  document.querySelectorAll('.mood-btn').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
  selectedMoodEmoji=emoji;
  localStorage.setItem('fr_mood',emoji);
  saveData();
}
const savedMood=localStorage.getItem('fr_mood');
if(savedMood){
  selectedMoodEmoji=savedMood;
  document.querySelectorAll('.mood-btn').forEach(b=>{if(b.title===({
    'üòî':'Heavy','üòê':'Neutral','üôè':'Prayerful','üòå':'Peaceful','üòä':'Grateful','‚ú®':'Blessed'
  }[savedMood]))b.classList.add('selected');});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STREAK
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const dayL=['S','M','T','W','T','F','S'];
function renderStreak(){
  const streak=parseInt(localStorage.getItem('fr_streak')||'0');
  const weekData=JSON.parse(localStorage.getItem('fr_week')||'[]');
  document.getElementById('streakNum').textContent=streak;
  const msgs=['Begin your journey tonight','Keep going, beloved','Two days of faithfulness','Pressing on with grace','Midweek devotion ‚Äî beautiful','Five days in His presence','Six days ‚Äî almost a week!','A full week of devotion! ‚ú¶'];
  document.getElementById('streakMsg').textContent=msgs[Math.min(streak,msgs.length-1)];
  const wrap=document.getElementById('weekDots'); wrap.innerHTML='';
  const now=new Date();
  for(let i=6;i>=0;i--){
    const d=new Date(now); d.setDate(now.getDate()-i);
    const key=d.toISOString().split('T')[0];
    const dot=document.createElement('div');
    dot.className='week-dot'+(weekData.includes(key)?' done':'');
    dot.textContent=dayL[d.getDay()];
    wrap.appendChild(dot);
  }
}
function markToday(){
  const today=new Date().toISOString().split('T')[0];
  let weekData=JSON.parse(localStorage.getItem('fr_week')||'[]');
  if(weekData.includes(today)){showToast('Already marked tonight ‚ú¶');return;}
  weekData.push(today);
  weekData=weekData.filter(d=>(new Date()-new Date(d))/86400000<=30);
  localStorage.setItem('fr_week',JSON.stringify(weekData));
  let streak=0,check=new Date();
  while(true){const key=check.toISOString().split('T')[0];if(weekData.includes(key)){streak++;check.setDate(check.getDate()-1);}else break;}
  localStorage.setItem('fr_streak',streak);
  renderStreak();
  showToast('Tonight marked ‚Äî '+streak+' day streak! üôè');
}
renderStreak();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AUDIO ‚Äî Web Audio API
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let audioCtx=null,gainNode=null,currentNode=null,currentSoundName=null;
function getACtx(){
  if(!audioCtx){
    audioCtx=new(window.AudioContext||window.webkitAudioContext)();
    gainNode=audioCtx.createGain(); gainNode.gain.value=0.5; gainNode.connect(audioCtx.destination);
  }
  return audioCtx;
}

function buildSound(type){
  const ctx=getACtx();
  const sr=ctx.sampleRate;

  if(type==='rain'){
    // layered filtered white noise
    const buf=ctx.createBuffer(2,sr*4,sr);
    for(let c=0;c<2;c++){
      const d=buf.getChannelData(c);
      for(let i=0;i<d.length;i++) d[i]=Math.random()*2-1;
    }
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    const f1=ctx.createBiquadFilter(); f1.type='bandpass'; f1.frequency.value=1200; f1.Q.value=0.6;
    const f2=ctx.createBiquadFilter(); f2.type='highpass'; f2.frequency.value=800;
    src.connect(f1); f1.connect(f2); f2.connect(gainNode); src.start();
    return src;
  }

  if(type==='fire'){
    const buf=ctx.createBuffer(1,sr*4,sr);
    const d=buf.getChannelData(0); let last=0;
    for(let i=0;i<d.length;i++){last=(last+(Math.random()*2-1)*0.18)*0.90;d[i]=last;}
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    const f=ctx.createBiquadFilter(); f.type='lowpass'; f.frequency.value=700; f.Q.value=0.7;
    src.connect(f); f.connect(gainNode); src.start();
    return src;
  }

  if(type==='wind'){
    const buf=ctx.createBuffer(1,sr*4,sr);
    const d=buf.getChannelData(0);
    for(let i=0;i<d.length;i++){
      const t=i/sr;
      d[i]=(Math.random()*2-1)*0.6*(0.5+0.5*Math.sin(t*0.3+Math.sin(t*0.1)*2));
    }
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    const f=ctx.createBiquadFilter(); f.type='bandpass'; f.frequency.value=300; f.Q.value=0.4;
    src.connect(f); f.connect(gainNode); src.start();
    return src;
  }

  if(type==='ocean'){
    // TRUE OCEAN: slow sine-wave amplitude modulation of bandpass noise = wave rhythm
    const buf=ctx.createBuffer(2,sr*8,sr);
    for(let c=0;c<2;c++){
      const d=buf.getChannelData(c);
      for(let i=0;i<d.length;i++){
        const t=i/sr;
        // wave envelope: ~7-second wave cycle
        const waveEnv=0.3+0.7*Math.max(0,Math.sin(t*0.9)*Math.sin(t*0.28));
        // foam burst on wave crest
        const foam=0.15*Math.max(0,Math.sin(t*0.9-0.5));
        const noise=Math.random()*2-1;
        d[i]=noise*(waveEnv*0.6+foam);
      }
    }
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    // low-pass to remove harsh highs, keep rumble + swish
    const f1=ctx.createBiquadFilter(); f1.type='lowpass'; f1.frequency.value=900; f1.Q.value=0.5;
    const f2=ctx.createBiquadFilter(); f2.type='highpass'; f2.frequency.value=80;
    src.connect(f1); f1.connect(f2); f2.connect(gainNode); src.start();
    return src;
  }

  if(type==='crickets'){
    // rhythmic amplitude-modulated high-pitched noise bursts
    const buf=ctx.createBuffer(1,sr*4,sr);
    const d=buf.getChannelData(0);
    for(let i=0;i<d.length;i++){
      const t=i/sr;
      // cricket chirp rhythm ~4 chirps/sec, each a brief burst
      const chirpRate=4.2;
      const phase=(t*chirpRate)%1;
      const chirpOn=phase<0.15?1:0;
      const tone=Math.sin(2*Math.PI*4200*t)*0.4;
      d[i]=tone*chirpOn*(0.7+0.3*Math.random());
    }
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    const f=ctx.createBiquadFilter(); f.type='bandpass'; f.frequency.value=4200; f.Q.value=8;
    src.connect(f); f.connect(gainNode); src.start();
    return src;
  }

  if(type==='bells'){
    // repeating soft bell tone
    const totalDur=8; const buf=ctx.createBuffer(1,sr*totalDur,sr);
    const d=buf.getChannelData(0);
    [[0,528,0.4],[1.5,704,0.25],[3,528,0.3],[4.5,880,0.2],[6,396,0.35]].forEach(([t,freq,amp])=>{
      const start=Math.floor(t*sr);
      for(let i=0;i<sr*2&&start+i<d.length;i++){
        const decay=Math.exp(-i/(sr*1.2));
        d[start+i]+=Math.sin(2*Math.PI*freq*(i/sr))*amp*decay;
        d[start+i]+=Math.sin(2*Math.PI*freq*2.01*(i/sr))*amp*0.15*decay;
      }
    });
    const src=ctx.createBufferSource(); src.buffer=buf; src.loop=true;
    src.connect(gainNode); src.start();
    return src;
  }

  return null;
}

function toggleSound(btn,name){
  const ctx=getACtx();
  if(ctx.state==='suspended') ctx.resume();
  document.querySelectorAll('.sound-btn').forEach(b=>b.classList.remove('playing'));
  if(currentSoundName===name){
    if(currentNode){try{currentNode.stop();}catch(e){}} currentNode=null; currentSoundName=null;
    return;
  }
  if(currentNode){try{currentNode.stop();}catch(e){}}
  currentNode=buildSound(name);
  currentSoundName=name;
  if(currentNode) btn.classList.add('playing');
}

function setVolume(v){
  if(gainNode) gainNode.gain.value=parseFloat(v);
  document.getElementById('volumeSlider').style.setProperty('--pct',v*100+'%');
}
document.getElementById('volumeSlider').style.setProperty('--pct','50%');

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PRAYER TIMER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let timerTotal=300,timerLeft=300,timerRunning=false,timerInterval=null;
const arcEl=document.getElementById('timerArc');
const timerTextEl=document.getElementById('timerText');
const timerStatusEl=document.getElementById('timerStatusText');
const ARC_FULL=471.24;

function setTimer(secs,btn){
  timerTotal=timerLeft=secs; clearInterval(timerInterval); timerRunning=false;
  updateTimerDisplay();
  document.querySelectorAll('.preset-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active'); timerStatusEl.textContent='READY';
}
function updateTimerDisplay(){
  const m=Math.floor(timerLeft/60),s=timerLeft%60;
  timerTextEl.textContent=`${m}:${String(s).padStart(2,'0')}`;
  arcEl.style.strokeDashoffset=ARC_FULL*(1-timerLeft/timerTotal);
}
function startTimer(){
  if(timerRunning)return;
  if(timerLeft<=0) timerLeft=timerTotal;
  timerRunning=true; timerStatusEl.textContent='PRAYING';
  timerInterval=setInterval(()=>{
    timerLeft--; updateTimerDisplay();
    if(timerLeft<=0){clearInterval(timerInterval);timerRunning=false;timerStatusEl.textContent='AMEN ‚ú¶';showToast('Prayer time complete ‚Äî Amen üôè');}
  },1000);
}
function pauseTimer(){clearInterval(timerInterval);timerRunning=false;timerStatusEl.textContent='PAUSED';}
function resetTimer(){clearInterval(timerInterval);timerRunning=false;timerLeft=timerTotal;updateTimerDisplay();timerStatusEl.textContent='READY';}
updateTimerDisplay();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PRAYER REQUESTS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let prayers=JSON.parse(localStorage.getItem('fr_prayers')||'[]');
function renderPrayers(){
  const wrap=document.getElementById('prayerItems'); wrap.innerHTML='';
  prayers.forEach((p,i)=>{
    const row=document.createElement('div');
    row.className='prayer-row'+(p.answered?' answered':'');
    row.innerHTML=`<div class="prayer-check" onclick="togglePrayer(${i})">${p.answered?'‚ú¶':''}</div>
      <input class="prayer-text-input" value="${(p.text||'').replace(/"/g,'&quot;')}" placeholder="Prayer request‚Ä¶" oninput="prayers[${i}].text=this.value;savePrayers()">
      <button onclick="removePrayer(${i})" style="background:transparent;border:none;color:var(--muted);cursor:pointer;font-size:16px;line-height:1">√ó</button>`;
    wrap.appendChild(row);
  });
}
function addPrayer(){prayers.push({text:'',answered:false});savePrayers();renderPrayers();}
function togglePrayer(i){prayers[i].answered=!prayers[i].answered;savePrayers();renderPrayers();if(prayers[i].answered)showToast('Praise! Prayer answered ‚ú¶');}
function removePrayer(i){prayers.splice(i,1);savePrayers();renderPrayers();}
function savePrayers(){localStorage.setItem('fr_prayers',JSON.stringify(prayers));}
renderPrayers();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCRIPTURE MEMORY GAME
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const memVerses=[
  {ref:'Psalm 46:10',text:'Be still and know that I am God'},
  {ref:'Isaiah 40:31',text:'Those who hope in the Lord will renew their strength'},
  {ref:'John 3:16',text:'For God so loved the world that he gave his only Son'},
  {ref:'Philippians 4:13',text:'I can do all things through Christ who strengthens me'},
  {ref:'Proverbs 3:5',text:'Trust in the Lord with all your heart'},
  {ref:'Psalm 23:1',text:'The Lord is my shepherd I shall not want'},
  {ref:'Romans 8:28',text:'All things work together for good to those who love God'},
  {ref:'Jeremiah 29:11',text:'For I know the plans I have for you declares the Lord'},
];
let memIdx=0,memAnswer=[];
function initMemGame(){
  const v=memVerses[memIdx];
  document.getElementById('memVerseHint').textContent=`Verse: ${v.ref}`;
  memAnswer=[]; document.getElementById('memSlots').innerHTML=''; document.getElementById('memFeedback').textContent='';
  const words=v.text.split(' ');
  const shuffled=[...words].sort(()=>Math.random()-0.5);
  const blanks=document.getElementById('memBlanks'); blanks.innerHTML='';
  shuffled.forEach(w=>{
    const chip=document.createElement('div'); chip.className='word-chip'; chip.textContent=w;
    chip.onclick=()=>addWord(chip,w); blanks.appendChild(chip);
  });
}
function addWord(chip,word){
  if(chip.classList.contains('used'))return;
  chip.classList.add('used'); memAnswer.push({word,chip});
  const slot=document.createElement('div'); slot.className='mem-slot'; slot.textContent=word;
  slot.dataset.idx=memAnswer.length-1;
  document.getElementById('memSlots').appendChild(slot);
  document.getElementById('memFeedback').textContent='';
}
function removeWord(e){
  const slot=e.target.closest('.mem-slot'); if(!slot)return;
  const idx=parseInt(slot.dataset.idx);
  if(memAnswer[idx]&&memAnswer[idx].chip) memAnswer[idx].chip.classList.remove('used');
  slot.remove(); memAnswer=[];
  document.querySelectorAll('#memSlots .mem-slot').forEach((s,i)=>{s.dataset.idx=i;memAnswer.push({word:s.textContent,chip:null});});
}
function checkMemory(){
  const v=memVerses[memIdx];
  const correct=v.text.toLowerCase().replace(/[^a-z ]/g,'').split(' ');
  const given=memAnswer.map(a=>a.word.toLowerCase().replace(/[^a-z]/g,''));
  const ok=correct.length===given.length&&correct.every((w,i)=>w===given[i]);
  const fb=document.getElementById('memFeedback');
  if(ok){fb.textContent='‚ú¶ Correct! "'+v.text+'" ‚Äî '+v.ref;fb.style.color='var(--gold2)';showToast('Scripture memorized! ‚ú¶');}
  else{fb.textContent='Not quite ‚Äî keep trying, beloved üôè';fb.style.color='var(--rose)';}
}
function nextMemVerse(){memIdx=(memIdx+1)%memVerses.length;initMemGame();}
initMemGame();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SAVE / LOAD / HISTORY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const HISTORY_KEY='fr_history_v2';

function getHistory(){return JSON.parse(localStorage.getItem(HISTORY_KEY)||'{}');}
function saveHistory(h){localStorage.setItem(HISTORY_KEY,JSON.stringify(h));}

function gatherCurrentData(){
  return {
    soapRef:document.getElementById('soapRef').value,
    soapS:document.getElementById('soapS').value,
    soapO:document.getElementById('soapO').value,
    soapA:document.getElementById('soapA').value,
    soapP:document.getElementById('soapP').value,
    refl1:document.getElementById('refl1').value,
    refl2:document.getElementById('refl2').value,
    refl3:document.getElementById('refl3').value,
    refl4:document.getElementById('refl4').value,
    moodNote:document.getElementById('moodNote').value,
    mood:selectedMoodEmoji,
    gratitude:[...document.querySelectorAll('.gratitude-input')].map(i=>i.value),
    date:new Date().toISOString().split('T')[0],
    savedAt:new Date().toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'}),
    verseRef:verses[verseIndex].ref,
  };
}

function saveData(showMsg=false){
  const data=gatherCurrentData();
  localStorage.setItem('fr_devotional',JSON.stringify(data));
  // Also store in history
  const hist=getHistory();
  hist[data.date]=data;
  // keep last 60 days
  const keys=Object.keys(hist).sort().slice(-60);
  const trimmed={}; keys.forEach(k=>trimmed[k]=hist[k]);
  saveHistory(trimmed);
  refreshHistorySelect();
  if(showMsg){
    const msg=document.getElementById('saveMsg');
    msg.style.opacity='1';
    setTimeout(()=>msg.style.opacity='0',3500);
    showToast('Evening saved to your archive ‚ú¶');
  }
}

function loadData(){
  const raw=localStorage.getItem('fr_devotional'); if(!raw)return;
  try{
    const d=JSON.parse(raw);
    if(d.date!==new Date().toISOString().split('T')[0])return;
    if(d.soapRef)document.getElementById('soapRef').value=d.soapRef;
    if(d.soapS)document.getElementById('soapS').value=d.soapS;
    if(d.soapO)document.getElementById('soapO').value=d.soapO;
    if(d.soapA)document.getElementById('soapA').value=d.soapA;
    if(d.soapP)document.getElementById('soapP').value=d.soapP;
    if(d.refl1)document.getElementById('refl1').value=d.refl1;
    if(d.refl2)document.getElementById('refl2').value=d.refl2;
    if(d.refl3)document.getElementById('refl3').value=d.refl3;
    if(d.refl4)document.getElementById('refl4').value=d.refl4;
    if(d.moodNote)document.getElementById('moodNote').value=d.moodNote;
    if(d.gratitude){
      const inputs=document.querySelectorAll('.gratitude-input');
      d.gratitude.forEach((v,i)=>{if(inputs[i])inputs[i].value=v;});
    }
  }catch(e){}
}

function clearToday(){
  if(!confirm('Clear all of tonight\'s entries?'))return;
  localStorage.removeItem('fr_devotional');
  ['soapRef','soapS','soapO','soapA','soapP','refl1','refl2','refl3','refl4','moodNote'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  document.querySelectorAll('.gratitude-input').forEach(i=>i.value='');
  selectedMoodEmoji='';
  document.querySelectorAll('.mood-btn').forEach(b=>b.classList.remove('selected'));
  showToast('Cleared. Fresh start ‚ú¶');
}

// ‚îÄ‚îÄ HISTORY RENDER ‚îÄ‚îÄ
function refreshHistorySelect(){
  const sel=document.getElementById('historySelect');
  const hist=getHistory();
  const dates=Object.keys(hist).sort().reverse();
  const current=sel.value;
  sel.innerHTML='<option value="">‚Äî Select an evening ‚Äî</option>';
  dates.forEach(d=>{
    const opt=document.createElement('option');
    const dateObj=new Date(d+'T00:00:00');
    const label=dateObj.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
    opt.value=d; opt.textContent=label+(hist[d].savedAt?' ¬∑ '+hist[d].savedAt:'');
    sel.appendChild(opt);
  });
  if(current&&hist[current]) sel.value=current;
}

function loadHistoryEntry(dateKey){
  const disp=document.getElementById('historyDisplay');
  if(!dateKey){disp.innerHTML='<div class="history-empty">‚ú¶<br><br>Select an evening above to revisit it.</div>';return;}
  const hist=getHistory();
  const d=hist[dateKey];
  if(!d){disp.innerHTML='<div class="history-empty">No entry found for this date.</div>';return;}

  const dateObj=new Date(dateKey+'T00:00:00');
  const fmtDate=dateObj.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
  const grats=(d.gratitude||[]).filter(g=>g.trim());
  const gratHTML=grats.length
    ?`<ul class="history-gratitude-list">${grats.map((g,i)=>`<li><span>${['I','II','III','IV','V'][i]||i+1}.</span>${g}</li>`).join('')}</ul>`
    :'<span class="history-block-text empty">Nothing recorded</span>';

  const soap=['soapS','soapO','soapA','soapP'];
  const soapLabels=['S ‚Äî Scripture','O ‚Äî Observation','A ‚Äî Application','P ‚Äî Prayer'];
  const soapHTML=soap.map((k,i)=>`
    <div class="history-soap-item">
      <div class="hs-label">${soapLabels[i]}</div>
      <div class="hs-text">${d[k]||'<span style="opacity:0.4;font-style:italic">Not filled</span>'}</div>
    </div>`).join('');

  const reflLabels=["Where did I see God's presence?","What I surrendered tonight","How I showed love","Intention for tomorrow"];
  const reflKeys=['refl1','refl2','refl3','refl4'];
  const reflHTML=reflKeys.map((k,i)=>d[k]?`
    <div class="history-block">
      <div class="history-block-label">${reflLabels[i]}</div>
      <div class="history-block-text">${d[k]}</div>
    </div>`:'').join('');

  disp.innerHTML=`
    <div class="history-timeline" style="position:relative">
      <div class="timeline-dot"></div>
      <span class="history-date-badge">${fmtDate}${d.savedAt?' ¬∑ '+d.savedAt:''}</span>

      ${d.mood||d.moodNote?`
      <div class="history-block">
        <div class="history-block-label">Evening Mood</div>
        <div class="history-block-text">${d.mood||''} ${d.moodNote||''}</div>
      </div>`:''}

      ${d.verseRef?`
      <div class="history-block">
        <div class="history-block-label">Evening Verse</div>
        <div class="history-block-text" style="font-style:italic">${d.verseRef}</div>
      </div>`:''}

      ${grats.length?`<div class="history-block"><div class="history-block-label">Thanksgiving</div>${gratHTML}</div>`:''}

      ${d.soapRef?`<div class="history-block">
        <div class="history-block-label">Scripture Studied</div>
        <div class="history-block-text" style="color:var(--gold)">${d.soapRef}</div>
      </div>`:'' }

      ${(d.soapS||d.soapO||d.soapA||d.soapP)?`
      <div class="history-block">
        <div class="history-block-label">S.O.A.P Study</div>
        <div class="history-soap-grid" style="margin-top:8px">${soapHTML}</div>
      </div>`:''}

      ${reflHTML?`<div class="history-block"><div class="history-block-label">Evening Reflections</div>${reflHTML}</div>`:''}
    </div>`;
}

function exportHistory(){
  const hist=getHistory();
  const dates=Object.keys(hist).sort();
  if(!dates.length){showToast('No history to export yet');return;}
  let txt='FAITHREFLECTS ‚Äî EVENING DEVOTIONAL ARCHIVE\n';
  txt+='‚ïê'.repeat(50)+'\n\n';
  dates.reverse().forEach(dateKey=>{
    const d=hist[dateKey];
    const dateObj=new Date(dateKey+'T00:00:00');
    txt+=dateObj.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
    if(d.savedAt) txt+=' ¬∑ '+d.savedAt;
    txt+='\n'+'‚îÄ'.repeat(40)+'\n';
    if(d.mood||d.moodNote) txt+=`MOOD: ${d.mood||''} ${d.moodNote||''}\n`;
    if(d.verseRef) txt+=`VERSE: ${d.verseRef}\n`;
    const grats=(d.gratitude||[]).filter(g=>g.trim());
    if(grats.length){txt+=`THANKSGIVING:\n`;grats.forEach((g,i)=>txt+=`  ${i+1}. ${g}\n`);}
    if(d.soapRef) txt+=`SCRIPTURE: ${d.soapRef}\n`;
    if(d.soapS) txt+=`S: ${d.soapS}\n`;
    if(d.soapO) txt+=`O: ${d.soapO}\n`;
    if(d.soapA) txt+=`A: ${d.soapA}\n`;
    if(d.soapP) txt+=`P: ${d.soapP}\n`;
    if(d.refl1) txt+=`GOD'S PRESENCE: ${d.refl1}\n`;
    if(d.refl2) txt+=`SURRENDER: ${d.refl2}\n`;
    if(d.refl3) txt+=`LOVE SHOWN: ${d.refl3}\n`;
    if(d.refl4) txt+=`TOMORROW: ${d.refl4}\n`;
    txt+='\n';
  });
  const blob=new Blob([txt],{type:'text/plain'});
  const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
  a.download='faithreflects-archive.txt'; a.click();
  showToast('Archive exported ‚ú¶');
}

loadData();
refreshHistorySelect();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TOAST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let toastTimer;
function showToast(msg){
  const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show');
  clearTimeout(toastTimer); toastTimer=setTimeout(()=>t.classList.remove('show'),2800);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SCROLL APPEAR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const observer=new IntersectionObserver(entries=>{
  entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');observer.unobserve(e.target);}});
},{threshold:0.08});
document.querySelectorAll('.appear').forEach(el=>observer.observe(el));

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SPARKLE ON CLICK
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
document.addEventListener('click',e=>{
  if(e.target.tagName==='INPUT'||e.target.tagName==='TEXTAREA'||e.target.tagName==='SELECT')return;
  for(let i=0;i<5;i++){
    const sp=document.createElement('div'); sp.className='sparkle';
    const angle=Math.random()*Math.PI*2;
    const dist=30+Math.random()*50;
    sp.style.cssText=`left:${e.clientX}px;top:${e.clientY}px;--sx:${Math.cos(angle)*dist}px;--sy:${Math.sin(angle)*dist}px;animation-duration:${0.6+Math.random()*0.4}s;width:${2+Math.random()*4}px;height:${2+Math.random()*4}px`;
    document.body.appendChild(sp);
    setTimeout(()=>sp.remove(),1200);
  }
});
</script>
</body>
</html>
