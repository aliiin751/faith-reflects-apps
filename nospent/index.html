<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FaithReflects - Contentment Calendar</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            background-color: #191919;
            color: #E3E3E3;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow-x: hidden;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #191919; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-scale-in { animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- ICONS ---
        const Icons = {
            Leaf: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.5 2 4.5a7.2 7.2 0 0 1-5.2 10.5c-7 2-9.3-4.8-10-7a7 7 0 0 1 10-7"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>,
            Bag: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>,
            ChevronLeft: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>,
            ChevronRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            Refresh: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        };

        const { useState, useEffect } = React;

        // --- CALENDAR LOGIC ---
        const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
        const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();

        // --- MAIN APP ---
        function App() {
            const today = new Date();
            const [currentDate, setCurrentDate] = useState(new Date(today.getFullYear(), today.getMonth(), 1));
            
            // State: { "2023-10-01": "content", "2023-10-02": "spent" }
            const [history, setHistory] = useState(() => {
                try {
                    const saved = localStorage.getItem('faithreflects_contentment');
                    return saved ? JSON.parse(saved) : {};
                } catch(e) { return {}; }
            });

            useEffect(() => {
                localStorage.setItem('faithreflects_contentment', JSON.stringify(history));
            }, [history]);

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const daysInMonth = getDaysInMonth(year, month);
            const firstDay = getFirstDayOfMonth(year, month); // 0 = Sunday

            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            const handleDayClick = (day) => {
                const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                setHistory(prev => {
                    const currentStatus = prev[dateKey];
                    const next = { ...prev };
                    
                    if (!currentStatus) next[dateKey] = 'content'; // Empty -> Content
                    else if (currentStatus === 'content') next[dateKey] = 'spent'; // Content -> Spent
                    else delete next[dateKey]; // Spent -> Empty
                    
                    return next;
                });
            };

            const changeMonth = (offset) => {
                setCurrentDate(new Date(year, month + offset, 1));
            };

            // Calculate Stats
            const countContent = Object.values(history).filter(v => v === 'content').length;
            const countSpent = Object.values(history).filter(v => v === 'spent').length;

            // Generate Calendar Grid
            const renderCalendar = () => {
                const slots = [];
                // Empty slots for start of month
                for (let i = 0; i < firstDay; i++) {
                    slots.push(<div key={`empty-${i}`} className="h-10"></div>);
                }
                // Day slots
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const status = history[dateKey];
                    
                    let bgClass = "bg-[#2C2C2C] border-[#333] hover:border-stone-500";
                    let content = <span className="text-stone-500 text-xs">{day}</span>;

                    if (status === 'content') {
                        bgClass = "bg-[#8BA870] border-[#8BA870] text-white shadow-[0_0_10px_rgba(139,168,112,0.3)]";
                        content = <Icons.Leaf size={16} className="animate-scale-in" />;
                    } else if (status === 'spent') {
                        bgClass = "bg-[#9F6B53] border-[#9F6B53] text-white";
                        content = <Icons.Bag size={16} className="animate-scale-in" />;
                    }

                    slots.push(
                        <button 
                            key={day} 
                            onClick={() => handleDayClick(day)}
                            className={`h-10 rounded-lg border flex items-center justify-center transition-all duration-200 ${bgClass}`}
                        >
                            {content}
                        </button>
                    );
                }
                return slots;
            };

            return (
                <div className="min-h-screen bg-[#191919] text-[#E3E3E3] font-sans flex flex-col p-4 max-w-sm mx-auto">
                    
                    {/* Header */}
                    <header className="flex justify-between items-center mb-6">
                        <div className="flex items-center space-x-1.5 text-stone-300">
                            <span className="text-lg">✨</span>
                            <span className="font-semibold tracking-tight text-sm font-serif">FaithReflects</span>
                        </div>
                        <span className="text-[10px] bg-[#2C2C2C] px-2 py-1 rounded text-[#8BA870] border border-[#333]">Contentment</span>
                    </header>

                    {/* Stats Card */}
                    <div className="bg-[#202020] p-4 rounded-xl border border-[#333] mb-6 flex justify-between items-center">
                        <div className="text-center flex-1 border-r border-[#333]">
                            <p className="text-[10px] text-stone-500 uppercase tracking-widest">Saved</p>
                            <p className="text-2xl font-bold text-[#8BA870]">{countContent}</p>
                            <p className="text-[9px] text-stone-600">Days</p>
                        </div>
                        <div className="text-center flex-1">
                            <p className="text-[10px] text-stone-500 uppercase tracking-widest">Spent</p>
                            <p className="text-2xl font-bold text-[#9F6B53]">{countSpent}</p>
                            <p className="text-[9px] text-stone-600">Days</p>
                        </div>
                    </div>

                    {/* Calendar Controls */}
                    <div className="flex justify-between items-center mb-4">
                        <button onClick={() => changeMonth(-1)} className="p-2 text-stone-500 hover:text-white hover:bg-[#2C2C2C] rounded-lg transition-colors">
                            <Icons.ChevronLeft size={18} />
                        </button>
                        <h2 className="font-bold text-lg">{monthNames[month]} {year}</h2>
                        <button onClick={() => changeMonth(1)} className="p-2 text-stone-500 hover:text-white hover:bg-[#2C2C2C] rounded-lg transition-colors">
                            <Icons.ChevronRight size={18} />
                        </button>
                    </div>

                    {/* Days Header */}
                    <div className="grid grid-cols-7 mb-2 text-center">
                        {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((d, i) => (
                            <div key={i} className="text-[10px] text-stone-600 font-bold">{d}</div>
                        ))}
                    </div>

                    {/* Calendar Grid */}
                    <div className="grid grid-cols-7 gap-2 mb-6">
                        {renderCalendar()}
                    </div>

                    {/* Legend */}
                    <div className="flex justify-center gap-6 mb-8">
                        <div className="flex items-center gap-2">
                            <div className="w-3 h-3 bg-[#8BA870] rounded-sm"></div>
                            <span className="text-xs text-stone-400">Content</span>
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="w-3 h-3 bg-[#9F6B53] rounded-sm"></div>
                            <span className="text-xs text-stone-400">Spent</span>
                        </div>
                    </div>

                    {/* Scripture Footer */}
                    <div className="mt-auto bg-[#202020] p-4 rounded-xl border border-[#333] text-center">
                        <p className="text-[#8BA870] text-[10px] font-bold uppercase tracking-widest mb-1">1 Timothy 6:6</p>
                        <p className="text-stone-400 italic text-xs leading-relaxed">
                            "But godliness with contentment is great gain."
                        </p>
                    </div>
                    
                    <footer className="mt-6 text-center opacity-30 text-[9px]">
                        FaithReflects • No-Spend Tracker
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>