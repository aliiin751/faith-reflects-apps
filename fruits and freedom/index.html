<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FaithReflects - Stewardship Suite</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            background-color: #191919;
            color: #E3E3E3;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow-x: hidden;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #191919; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-slide-up { animation: slideUp 0.4s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- ICONS ---
        const Icons = {
            Calculator: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>,
            Chain: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
            Plus: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Trash: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>,
            Unlock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>
        };

        const { useState, useEffect } = React;

        // --- APP 1: FIRST FRUITS CALCULATOR ---
        const FirstFruits = () => {
            const [income, setIncome] = useState('');
            const [breakdown, setBreakdown] = useState(null);

            useEffect(() => {
                const val = parseFloat(income);
                if (!isNaN(val) && val > 0) {
                    setBreakdown({
                        tithe: val * 0.10,
                        savings: val * 0.20,
                        expenses: val * 0.70
                    });
                } else {
                    setBreakdown(null);
                }
            }, [income]);

            return (
                <div className="animate-slide-up space-y-6">
                    <div className="text-center mb-4">
                        <p className="text-[#9F6B53] text-xs font-bold uppercase tracking-widest mb-1">Malachi 3:10</p>
                        <p className="text-stone-400 italic text-sm">"Bring the whole tithe into the storehouse..."</p>
                    </div>

                    <div className="bg-[#202020] p-4 rounded-xl border border-[#333]">
                        <label className="text-xs text-stone-500 uppercase font-bold block mb-2">Total Income</label>
                        <div className="relative">
                            <span className="absolute left-3 top-1/2 -translate-y-1/2 text-stone-400">$</span>
                            <input 
                                type="number" 
                                value={income}
                                onChange={(e) => setIncome(e.target.value)}
                                className="w-full bg-[#2C2C2C] text-white p-3 pl-8 rounded-lg border border-[#333] focus:border-[#9F6B53] outline-none transition-colors font-mono text-lg"
                                placeholder="0.00"
                            />
                        </div>
                    </div>

                    {breakdown && (
                        <div className="space-y-3">
                            <div className="flex items-center justify-between bg-[#2C2C2C] p-3 rounded-lg border-l-4 border-[#9F6B53]">
                                <div>
                                    <p className="text-[#9F6B53] font-bold text-sm">First Fruits (10%)</p>
                                    <p className="text-[10px] text-stone-500">Tithe & Offering</p>
                                </div>
                                <span className="text-xl font-mono text-white">${breakdown.tithe.toFixed(2)}</span>
                            </div>
                            <div className="flex items-center justify-between bg-[#2C2C2C] p-3 rounded-lg border-l-4 border-[#577B8D]">
                                <div>
                                    <p className="text-[#577B8D] font-bold text-sm">Storehouse (20%)</p>
                                    <p className="text-[10px] text-stone-500">Savings & Investment</p>
                                </div>
                                <span className="text-xl font-mono text-white">${breakdown.savings.toFixed(2)}</span>
                            </div>
                            <div className="flex items-center justify-between bg-[#2C2C2C] p-3 rounded-lg border-l-4 border-[#8BA870]">
                                <div>
                                    <p className="text-[#8BA870] font-bold text-sm">Daily Bread (70%)</p>
                                    <p className="text-[10px] text-stone-500">Living Expenses</p>
                                </div>
                                <span className="text-xl font-mono text-white">${breakdown.expenses.toFixed(2)}</span>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- APP 2: FREEDOM STEPS ---
        const FreedomSteps = () => {
            const [debtData, setDebtData] = useState(() => {
                const saved = localStorage.getItem('faithreflects_freedom_v2'); 
                try {
                    const parsed = JSON.parse(saved);
                    // Ensure valid numbers
                    if (parsed && typeof parsed.paid === 'number' && typeof parsed.total === 'number') return parsed;
                    return { total: 10000, paid: 0 };
                } catch {
                    return { total: 10000, paid: 0 };
                }
            });
            const [payAmount, setPayAmount] = useState('');

            useEffect(() => {
                localStorage.setItem('faithreflects_freedom_v2', JSON.stringify(debtData));
            }, [debtData]);

            const makePayment = () => {
                const val = parseFloat(payAmount);
                if (!isNaN(val) && val > 0) {
                    const newPaid = Math.min(debtData.paid + val, debtData.total);
                    setDebtData(prev => ({ ...prev, paid: newPaid }));
                    setPayAmount('');
                }
            };

            const reset = () => {
                 if(confirm("Reset debt tracker?")) setDebtData({ total: 10000, paid: 0 });
            };

            const percent = Math.min((debtData.paid / debtData.total) * 100, 100);
            
            // Visual Chain Links
            const totalLinks = 10;
            const brokenLinks = Math.floor((percent / 100) * totalLinks);

            return (
                <div className="animate-slide-up">
                     <div className="flex justify-between items-end mb-4">
                        <div>
                            <p className="text-[#9F6B53] text-xs font-bold uppercase tracking-widest">Proverbs 22:7</p>
                            <p className="text-stone-400 text-xs">"The borrower is slave to the lender."</p>
                        </div>
                        <button onClick={reset} className="text-stone-600 hover:text-red-400 transition-colors" title="Reset"><Icons.Trash size={14}/></button>
                    </div>

                    <div className="flex justify-between mb-6 px-2">
                        {[...Array(totalLinks)].map((_, i) => (
                            <div key={i} className={`transition-all duration-700 ${i < brokenLinks ? 'text-[#9F6B53] scale-110' : 'text-[#333]'}`}>
                                {i < brokenLinks ? <Icons.Unlock size={24} /> : <Icons.Chain size={24} />}
                            </div>
                        ))}
                    </div>

                    <div className="bg-[#202020] p-4 rounded-xl border border-[#333] mb-4">
                        <div className="flex justify-between text-sm mb-2">
                            <span className="text-stone-400">Paid Off</span>
                            <span className="text-[#9F6B53] font-bold">${debtData.paid.toLocaleString()} / ${debtData.total.toLocaleString()}</span>
                        </div>
                        <div className="w-full h-2 bg-[#2C2C2C] rounded-full overflow-hidden">
                            <div 
                                className="h-full bg-[#9F6B53] transition-all duration-1000 ease-out"
                                style={{ width: `${percent}%` }}
                            />
                        </div>
                    </div>

                    <div className="flex gap-2">
                         <input 
                            type="number" 
                            value={payAmount}
                            onChange={(e) => setPayAmount(e.target.value)}
                            className="flex-1 bg-[#2C2C2C] text-white p-3 rounded-lg border border-[#333] focus:border-[#9F6B53] outline-none font-mono"
                            placeholder="Payment Amount"
                        />
                        <button 
                            onClick={makePayment}
                            className="bg-[#9F6B53] text-white px-6 rounded-lg font-bold uppercase text-xs tracking-wider hover:bg-[#8F5B43] transition-colors"
                        >
                            Break Chain
                        </button>
                    </div>
                </div>
            );
        };

        // --- MAIN WRAPPER ---
        function App() {
            const [activeTab, setActiveTab] = useState('fruits');

            const tabs = [
                { id: 'fruits', icon: Icons.Calculator, label: 'First Fruits' },
                { id: 'freedom', icon: Icons.Chain, label: 'Freedom Steps' }
            ];

            return (
                <div className="min-h-screen bg-[#191919] text-[#E3E3E3] font-sans flex flex-col p-4 max-w-sm mx-auto">
                    <header className="flex justify-between items-center mb-6">
                        <div className="flex items-center space-x-1.5 text-stone-300">
                            <span className="text-lg">✨</span>
                            <span className="font-semibold tracking-tight text-sm font-serif">FaithReflects</span>
                        </div>
                        <span className="text-[10px] bg-[#2C2C2C] px-2 py-1 rounded text-[#9F6B53] border border-[#333]">Stewardship</span>
                    </header>

                    <div className="flex bg-[#202020] p-1 rounded-xl mb-6 border border-[#333]">
                        {tabs.map(tab => {
                            const Icon = tab.icon;
                            const isActive = activeTab === tab.id;
                            return (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex-1 flex flex-col items-center justify-center py-2 rounded-lg transition-all duration-300 ${isActive ? 'bg-[#9F6B53] text-white shadow-lg' : 'text-stone-500 hover:text-stone-300'}`}
                                >
                                    <Icon size={18} className="mb-1" />
                                    <span className="text-[10px] font-bold uppercase tracking-wide">{tab.label}</span>
                                </button>
                            );
                        })}
                    </div>

                    <main className="flex-1 overflow-hidden flex flex-col">
                        {activeTab === 'fruits' && <FirstFruits />}
                        {activeTab === 'freedom' && <FreedomSteps />}
                    </main>

                    <footer className="mt-8 text-center opacity-30 text-[9px]">
                        FaithReflects • Provision & Stewardship
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>